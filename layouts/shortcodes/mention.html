{{ $key := .Get "key"}}{{- $tag := default "span" (.Get "tag") }}{{- $itemprop := default "mentions" (.Get "itemprop")}}{{- $itemtype := "Thing" }}{{- $data := index (where $.Site.Data.glossary "key" "eq" $key) 0 }}{{- $title := $data.title }}{{- if $data.mentionAs }}{{- $title = $data.mentionAs }}{{- end }}{{- if isset $data "itemtype" }}{{- $itemtype = $data.itemtype }}{{- end }}{{ printf "<%s itemprop=\"%s\" itemscope itemtype=\"http://schema.org/%s\">" $tag $itemprop $itemtype | safeHTML }}{{- if isset $data "itemid" }}<link itemprop="sameAs" href="{{ $data.itemid }}" />{{- end }}<span itemprop="name">{{ if .Get "downcase" }}{{ lower $title }}{{ else }}{{ $title }}{{ end }}</span>{{- printf "</%s>" $tag | safeHTML }}